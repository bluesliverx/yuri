dist: xenial
language: python
python: 3.7
services:
- docker
env:
  global:
  - IMAGE_NAME=bksaville/yuri
  - DOCKER_USERNAME=bksaville
  # DOCKER_PASSWORD=...
  - secure: "Za9oVY7NnrK/Fy6q0++jVKAejWUPYe7bggEh59Ni6QO92KwkOU5yvLwa2YNCN06N4jOXh6BES/m+4Z3YJl9nh0snS9TrtKWVLNdTz/zwbiTs1stTiV+Krj7hCMBqPgkBJi/ckD6OFwBlUI9YI3skja0PJP4Z6M8QaLEvb4NEpXL9vezwdwP+Z1OkHg0iPjh471Td1XfWo0ihlNdiw7rTNNsFoxrXaZhtjUBTdcq0+u8U8pz1ILYfbQanGcm/vzeKxnjmuLbDLD7jxfl+ygNf72TikDDTFcXGtBP4UJSEkGlQCNTaCiK/hclXNJ+dBPOPghk8Xk6l84PMJa82pLQ6aDvWSbhXKAJv14Di293Rsq7sZuqYX+VSKICMakC4ngfVlgagPyyn+RnyfqZhXchtlPWfmrsqVwBapEUVWdHwbK5mS47JQq13JAJyKalFhcWOgjjQU2fY+qqI9EBNlaA5jjFln3axOv+t+oYr5j3h3tY2hvQT3kXEc3XfNaIn0GD0NgEVTVyPLqiYkU3s17pBe8+E8v60g5Kg3S/QP5UC8lg3RfQIpVrjoDOSK2N6pisP9vCnnyYCOr4WMeGdZiDOJJUjIgVuJeUSAaLIedhBRLpzRUsjA0UIda4+JLi1/kOzoRC5woYfhXbxRcEfo53lf5fNTIDc0CYLusegPzTzkps="
cache:
  directories:
  - "$HOME/.cache/pip"
  - "$TRAVIS_BUILD_DIR/.tox"
install: pip install tox
script:
- |
  if [[ $TRAVIS_TAG == "" ]]; then
    tox
  fi
deploy:
#- provider: pypi
#  distributions: sdist bdist_wheel
#  user: __token__
#  password:
#    secure: <ENCRYPTED-PASSWORD>
#  skip_cleanup: true
#  on:
#    tags: true
#    repo: bluesliverx/yuri
- provider: script
  script: bash deploy-docker
  on:
    tags: true
